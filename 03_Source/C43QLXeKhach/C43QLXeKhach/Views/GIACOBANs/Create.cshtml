@model C43QLXeKhach.Models.GiaCoBanViewModel

@{
    ViewBag.Title = "Thêm Giá cơ bản";
}

<h2>Thêm Giá cơ bản</h2>

@using (Html.BeginForm("Create", "GIACOBANs", FormMethod.Post, new { id = "gcbCreate" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="form-horizontal">
        <hr />
        <div class="form-group">
            <label class="control-label col-md-2">Tỉnh thành đi</label>
            <div class="col-md-10">
                <select class="form-control" id="ttDi" name="ttDi" value="@Model.gcb.MaTT1" onchange="UpdateTT1(event)">
                    @foreach (var item in Model.tinhThanh)
                    {
                        <option value="@item.MaTT">@item.TenTT</option>
                    }
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Tỉnh thành đến</label>
            <div class="col-md-10">
                <select class="form-control" id="ttDen" name="ttDen" value="@Model.gcb.MaTT2" onchange="UpdateTT2(event)">
                    @foreach (var item in Model.tinhThanh)
                    {
                        <option value="@item.MaTT">@item.TenTT</option>
                    }
                </select>
                @Html.ValidationMessageFor(model => model.gcb.MaTT2, "Vui lòng chọn điểm đến khác điểm đi", new { @class = "text-danger" })
                <div class="text-danger">@ViewBag.TT2Message</div>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Loại xe</label>
            <div class="col-md-10">
                <select class="form-control" id="maLoai" name="maLoai" value="@Model.gcb.MaLoai" onchange="UpdateMaLoai(event)">
                    @foreach (var item in Model.lx)
                    {
                        <option value="@item.MaLoai">@item.TenLoai</option>
                    }
                </select>
                
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Giá vé</label>
            <div class="col-md-10">
                @Html.EditorFor(model => model.gcb.GiaCoBan1, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.gcb.GiaCoBan1, "Vui lòng nhập giá", new { @class = "text-danger" })

            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input id="create" type="submit" value="Thêm" class="btn btn-success" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Quay trở lại", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">

        function UpdateMaLoai(e) {
            @Model.gcb.MaLoai = e.target.value;
        }

        function UpdateGia(e) {
            @Model.gcb.GiaCoBan1 = e.target.value;
        }

        function UpdateTT1(e) {
            @Model.gcb.MaTT1 = e.target.value;
        }

        function UpdateTT2(e) {
            @Model.gcb.MaTT2 = e.target.value;
            @ViewBag.TT2Message ="";
        }


    </script>
}
